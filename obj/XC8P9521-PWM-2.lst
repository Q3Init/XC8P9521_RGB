slasm-0.13.6 beta               C:\Users\15247\Desktop\xj\FUN\obj\XC8P9521-PWM-2.asm5-3-2024  02:04:21           PAGE  1


               00001 ;--------------------------------------------------------
               00002 ; File Created by SLCC : free open source ANSI-C Compiler
               00003 ; Version 3.6.0 #Jan 29 2024 (MSVC)
               00004 ;--------------------------------------------------------
               00005 ; SL port for the RISC core
               00006 ;--------------------------------------------------------
               00007 ;       .file   "C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C"
               00008         list    p=XC8P9521
               00009         radix dec
               00010         include "XC8P9521.inc"
               00001         LIST                                                                  
               00002 ; XC8P9521.INC  Standard Header File, Version 1.00
               00083         LIST
               00011 ;--------------------------------------------------------
               00012 ; external declarations
               00013 ;--------------------------------------------------------
               00014         extern  _delayUs
               00015         extern  _delayMs
               00016         extern  _IARbits
               00017         extern  _TCCbits
               00018         extern  _PCLbits
               00019         extern  _STATUSbits
               00020         extern  _RSRbits
               00021         extern  _PORT5bits
               00022         extern  _PORT6bits
               00023         extern  _LVDCONbits
               00024         extern  _PWMCONbits
               00025         extern  _PRDbits
               00026         extern  _PDC1bits
               00027         extern  _PDC2bits
               00028         extern  _PDC3bits
               00029         extern  _ICIECRbits
               00030         extern  _CPUCONbits
               00031         extern  _ISRbits
               00032         extern  _IAR
               00033         extern  _TCC
               00034         extern  _PCL
               00035         extern  _STATUS
               00036         extern  _RSR
               00037         extern  _PORT5
               00038         extern  _PORT6
               00039         extern  _LVDCON
               00040         extern  _PWMCON
               00041         extern  _PRD
               00042         extern  _PDC1
               00043         extern  _PDC2
               00044         extern  _PDC3
               00045         extern  _ICIECR
               00046         extern  _CPUCON
               00047         extern  _ISR
               00048 ;--------------------------------------------------------
               00049 ; global declarations
               00050 ;--------------------------------------------------------
               00051         global  _output_process
               00052         global  _rgb_process
               00053         global  _key_process
               00054         global  _shake_process
               00055         global  _beep_process
               00056         global  _file_clrRam
               00057         global  _file_init
               00058         global  _file_project_init
               00059         global  _int_isr
               00060         global  _main
               00061         global  _A_BUFF
               00062         global  _R3_BUFF
               00063         global  _pwrkey_delay
               00064         global  _ledkey_delay
               00065         global  _beep_delay
               00066         global  _shake_flag
               00067         global  _beep_mode
               00068         global  _beep_cnt
               00069         global  _led_mode
               00070         global  _led_switch
               00071         global  _mode_switch
               00072         global  _color_pwm_duty
               00073         global  _once_pwm_duty
               00074         global  _cir_mode
               00075         global  _led_cnt
               00076 
               00077         global STK06
               00078         global STK05
               00079         global STK04
               00080         global STK03
               00081         global STK02
               00082         global STK01
               00083         global STK00
               00084 
               00085 sharebank udata_ovr 0x0020
               00086 STK06   res 1
               00087 STK05   res 1
               00088 STK04   res 1
               00089 STK03   res 1
               00090 STK02   res 1
               00091 STK01   res 1
               00092 STK00   res 1
               00093 
               00094 ;--------------------------------------------------------
               00095 ; global definitions
               00096 ;--------------------------------------------------------
               00097 ;--------------------------------------------------------
               00098 ; absolute symbol definitions
               00099 ;--------------------------------------------------------
               00100 UD_abs_XC8P9521_PWM_2_10        udata_ovr       0x0010
               00101 _A_BUFF
               00102         res     1
               00103 UD_abs_XC8P9521_PWM_2_11        udata_ovr       0x0011
               00104 _R3_BUFF
               00105         res     1
               00106 ;--------------------------------------------------------
               00107 ; compiler-defined variables
               00108 ;--------------------------------------------------------
               00109 UDL_XC8P9521_PWM_2_0    udata
               00110 r0x1015 res     1
               00111 r0x1016 res     1
               00112 r0x1013 res     1
               00113 r0x100F res     1
               00114 r0x1012 res     1
               00115 r0x1010 res     1
               00116 ;--------------------------------------------------------
               00117 ; initialized data
               00118 ;--------------------------------------------------------
               00119 
               00120 ID_XC8P9521_PWM_2_0     idata
               00121 _pwrkey_delay
0000 3F82      00122         add 0x02,a
               00123         db      0x00, 0x00
               00124 
               00125 
               00126 ID_XC8P9521_PWM_2_1     idata
               00127 _ledkey_delay
0000 3F82      00128         add 0x02,a
               00129         db      0x00, 0x00
               00130 
               00131 
               00132 ID_XC8P9521_PWM_2_2     idata
               00133 _beep_delay
0000 3F82      00134         add 0x02,a
               00135         db      0x00, 0x00
               00136 
               00137 
               00138 ID_XC8P9521_PWM_2_3     idata
               00139 _shake_flag
0000 3F82      00140         add 0x02,a
               00141         db      0x00
               00142 
               00143 
               00144 ID_XC8P9521_PWM_2_4     idata
               00145 _beep_mode
0000 3F82      00146         add 0x02,a
               00147         db      0x00
               00148 
               00149 
               00150 ID_XC8P9521_PWM_2_5     idata
               00151 _beep_cnt
0000 3F82      00152         add 0x02,a
               00153         db      0x00
               00154 
               00155 
               00156 ID_XC8P9521_PWM_2_6     idata
               00157 _led_mode
0000 3F82      00158         add 0x02,a
               00159         db      0x01
               00160 
               00161 
               00162 ID_XC8P9521_PWM_2_7     idata
               00163 _led_switch
0000 3F82      00164         add 0x02,a
               00165         db      0x01
               00166 
               00167 
               00168 ID_XC8P9521_PWM_2_8     idata
               00169 _mode_switch
0000 3F82      00170         add 0x02,a
               00171         db      0x00
               00172 
               00173 
               00174 ID_XC8P9521_PWM_2_9     idata
               00175 _color_pwm_duty
0000 3F82      00176         add 0x02,a
               00177         db      0x00
               00178 
               00179 
               00180 ID_XC8P9521_PWM_2_10    idata
               00181 _once_pwm_duty
0000 3F82      00182         add 0x02,a
               00183         db      0x00
               00184 
               00185 
               00186 ID_XC8P9521_PWM_2_11    idata
               00187 _cir_mode
0000 3F82      00188         add 0x02,a
               00189         db      0x00
               00190 
               00191 
               00192 ID_XC8P9521_PWM_2_12    idata
               00193 _led_cnt
0000 3F82      00194         add 0x02,a
               00195         db      0x00
               00196 
               00197 
               00198 ;@Allocation info for local variables in function 'file_clrRam'
               00199 ;@file_clrRam delayUs                   Allocated to registers ;size:2
               00200 ;@file_clrRam delayMs                   Allocated to registers ;size:2
               00201 ;@file_clrRam key_process               Allocated to registers ;size:2
               00202 ;@file_clrRam rgb_process               Allocated to registers ;size:2
               00203 ;@file_clrRam output_process            Allocated to registers ;size:2
               00204 ;@file_clrRam beep_process              Allocated to registers ;size:2
               00205 ;@file_clrRam shake_process             Allocated to registers ;size:2
               00206 ;@file_clrRam file_clrRam               Allocated to registers ;size:2
               00207 ;@file_clrRam IARbits                   Allocated to registers ;size:1
               00208 ;@file_clrRam TCCbits                   Allocated to registers ;size:1
               00209 ;@file_clrRam PCLbits                   Allocated to registers ;size:1
               00210 ;@file_clrRam STATUSbits                Allocated to registers ;size:1
               00211 ;@file_clrRam RSRbits                   Allocated to registers ;size:1
               00212 ;@file_clrRam PORT5bits                 Allocated to registers ;size:1
               00213 ;@file_clrRam PORT6bits                 Allocated to registers ;size:1
               00214 ;@file_clrRam LVDCONbits                Allocated to registers ;size:1
               00215 ;@file_clrRam PWMCONbits                Allocated to registers ;size:1
               00216 ;@file_clrRam PRDbits                   Allocated to registers ;size:1
               00217 ;@file_clrRam PDC1bits                  Allocated to registers ;size:1
               00218 ;@file_clrRam PDC2bits                  Allocated to registers ;size:1
               00219 ;@file_clrRam PDC3bits                  Allocated to registers ;size:1
               00220 ;@file_clrRam ICIECRbits                Allocated to registers ;size:1
               00221 ;@file_clrRam CPUCONbits                Allocated to registers ;size:1
               00222 ;@file_clrRam ISRbits                   Allocated to registers ;size:1
               00223 ;@file_clrRam A_BUFF                    Allocated to registers ;size:1
               00224 ;@file_clrRam R3_BUFF                   Allocated to registers ;size:1
               00225 ;@file_clrRam pwrkey_delay              Allocated to registers ;size:2
               00226 ;@file_clrRam ledkey_delay              Allocated to registers ;size:2
               00227 ;@file_clrRam beep_delay                Allocated to registers ;size:2
               00228 ;@file_clrRam shake_flag                Allocated to registers ;size:1
               00229 ;@file_clrRam beep_mode                 Allocated to registers ;size:1
               00230 ;@file_clrRam beep_cnt                  Allocated to registers ;size:1
               00231 ;@file_clrRam led_mode                  Allocated to registers ;size:1
               00232 ;@file_clrRam led_switch                Allocated to registers ;size:1
               00233 ;@file_clrRam mode_switch               Allocated to registers ;size:1
               00234 ;@file_clrRam color_pwm_duty            Allocated to registers ;size:1
               00235 ;@file_clrRam once_pwm_duty             Allocated to registers ;size:1
               00236 ;@file_clrRam cir_mode                  Allocated to registers ;size:1
               00237 ;@file_clrRam led_cnt                   Allocated to registers ;size:1
               00238 ;@file_clrRam IAR                       Allocated to registers ;size:1
               00239 ;@file_clrRam TCC                       Allocated to registers ;size:1
               00240 ;@file_clrRam PCL                       Allocated to registers ;size:1
               00241 ;@file_clrRam STATUS                    Allocated to registers ;size:1
               00242 ;@file_clrRam RSR                       Allocated to registers ;size:1
               00243 ;@file_clrRam PORT5                     Allocated to registers ;size:1
               00244 ;@file_clrRam PORT6                     Allocated to registers ;size:1
               00245 ;@file_clrRam LVDCON                    Allocated to registers ;size:1
               00246 ;@file_clrRam PWMCON                    Allocated to registers ;size:1
               00247 ;@file_clrRam PRD                       Allocated to registers ;size:1
               00248 ;@file_clrRam PDC1                      Allocated to registers ;size:1
               00249 ;@file_clrRam PDC2                      Allocated to registers ;size:1
               00250 ;@file_clrRam PDC3                      Allocated to registers ;size:1
               00251 ;@file_clrRam ICIECR                    Allocated to registers ;size:1
               00252 ;@file_clrRam CPUCON                    Allocated to registers ;size:1
               00253 ;@file_clrRam ISR                       Allocated to registers ;size:1
               00254 ;@end Allocation info for local variables in function 'file_clrRam';
               00255 
               00256 ;--------------------------------------------------------
               00257 ; overlayable items in internal ram 
               00258 ;--------------------------------------------------------
               00259 ;       udata_ovr
               00260 ;--------------------------------------------------------
               00261 ; reset vector 
               00262 ;--------------------------------------------------------
               00263 STARTUP code 0x0000
0000 1000      00264         jmp     _main
               00265 ;--------------------------------------------------------
               00266 ; interrupt and initialization code
               00267 ;--------------------------------------------------------
               00268 c_interrupt     code    0x0003
0003           00269 __sdcc_interrupt:
               00270 ;***
               00271 ;  pBlock Stats: dbName = I
               00272 ;***
               00273 ;; Starting pCode block
0003           00274 _int_isr:       ;Function start
               00275 ; 0 exit points
               00276 ;       .line   138; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     __asm__("org 0x08");                    //中断入口地址                  
               00277         org     0x08
               00278 ;       .line   139; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     PUSH(_A_BUFF,_R3_BUFF);                 //中断入栈保护
0008 3880      00279         mov     _A_BUFF,a
0009 3680      00280         swap    _A_BUFF
000A 3603      00281         swapa   STATUS
000B 3880      00282         mov     _R3_BUFF,a
               00283 ;       .line   141; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if(TCIF)                                        //判断TCIF是否为1
000C 2400      00284         JBTS    _ISRbits,0
000D 1000      00285         JMP     _00121_DS_
               00286 ;       .line   143; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     TCC       += 6;                 //1/2 * 8 * (256-6) = 1000us    公式：1/IRC频率 * 预分频 * （256-初值）
000E 0806      00287         MOV     A,@0x06
000F 3F80      00288         ADD     _TCC,A
               00289 ;       .line   144; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     ISR    = 0xfe;                          //清TC0中断标志位
0010 08FE      00290         MOV     A,@0xfe
0011 3880      00291         MOV     _ISR,A
0012           00292 _00121_DS_:
               00293 ;       .line   147; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if(T1IF)                                        //判断T1IF是否为1,pwm周期中断
0012 2580      00294         JBTS    _ISRbits,3
0013 1000      00295         JMP     _00123_DS_
               00296 ;       .line   149; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     ISR    = 0xf7;                          //ISR的bit3:T1IF清零
0014 08F7      00297         MOV     A,@0xf7
0015 3880      00298         MOV     _ISR,A
0016           00299 _00123_DS_:
               00300 ;       .line   152; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     POP(_A_BUFF,_R3_BUFF);                  //中断出栈保护恢复
0016 3600      00301         swapa   _R3_BUFF
0017 3883      00302         mov     STATUS,a
0018 3600      00303         swapa   _A_BUFF
               00304 ;       .line   153; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
0019           00305 END_OF_INTERRUPT:
0019 3823      00306         RETI    
               00307 
               00308 ;--------------------------------------------------------
               00309 ; code
               00310 ;--------------------------------------------------------
               00311 code_XC8P9521_PWM_2     code
               00312 ;***
               00313 ;  pBlock Stats: dbName = M
               00314 ;***
               00315 ;has an exit
               00316 ;functions called:
               00317 ;   _file_clrRam
               00318 ;   _file_init
               00319 ;   _file_project_init
               00320 ;   _key_process
               00321 ;   _file_clrRam
               00322 ;   _file_init
               00323 ;   _file_project_init
               00324 ;   _key_process
               00325 ;2 compiler assigned registers:
               00326 ;   r0x1010
               00327 ;   r0x1011
               00328 ;; Starting pCode block
               00329 S_XC8P9521_PWM_2__main  code
0000           00330 _main:  ;Function start
               00331 ; 2 exit points
               00332 ;       .line   381; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     file_clrRam();                                  //清RAM
0000 1800      00333         CALL    _file_clrRam
               00334 ;       .line   382; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     file_init();                                    //io寄存器初始化
0001 1800      00335         CALL    _file_init
               00336 ;       .line   383; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     file_project_init();                    //程序所需功能设置
0002 1800      00337         CALL    _file_project_init
               00338 ;       .line   384; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     EI();                                                   //打开总中断
0003 3820      00339         ei      
0004           00340 _00315_DS_:
               00341 ;       .line   389; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( 1 == LIMIT_PORT() )
0004 3980      00342         CLR     r0x1010
0005 2180      00343         JBTC    _PORT5bits,3
0006 3280      00344         INC     r0x1010
               00345 ;;104   MOV     A,r0x1010
               00346 ;;102   MOV     r0x1011,A
               00347 ;;103   MOV     A,r0x1011
0007 3000      00348         MOV     A,r0x1010
0008 0E01      00349         XOR     A,@0x01
0009 2503      00350         JBTS    STATUS,2
000A 1000      00351         JMP     _00312_DS_
               00352 ;       .line   391; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     FUN_PORT() = 0;
000B 2B00      00353         BTC     _PORT6bits,6
               00354 ;       .line   392; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     COLD_PORT() = 0;
000C 2B80      00355         BTC     _PORT6bits,7
               00356 ;       .line   393; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = 100;
000D 0864      00357         MOV     A,@0x64
000E 3880      00358         MOV     _PDC1,A
               00359 ;       .line   394; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     G_PWMDTY = 0;
000F 3980      00360         CLR     _PDC2
               00361 ;       .line   395; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     B_PWMDTY = 100;
0010 0864      00362         MOV     A,@0x64
0011 3880      00363         MOV     _PDC3,A
               00364 ;       .line   397; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = 0;
0012 3980      00365         CLR     _PDC1
0013 1000      00366         JMP     _00315_DS_
0014           00367 _00312_DS_:
               00368 ;       .line   400; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     else if( 0 == LIMIT_PORT( ) )
0014 2180      00369         JBTC    _PORT5bits,3
0015 1000      00370         JMP     _00315_DS_
               00371 ;       .line   404; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( 0 == led_switch )
0016 0800      00372         MOV     A,@0x00
0017 3C00      00373         OR      A,_led_switch
0018 2503      00374         JBTS    STATUS,2
0019 1000      00375         JMP     _00307_DS_
               00376 ;       .line   407; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = 0;
001A 3980      00377         CLR     _PDC1
               00378 ;       .line   408; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     G_PWMDTY = 0;
001B 3980      00379         CLR     _PDC2
               00380 ;       .line   409; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     B_PWMDTY = 100;
001C 0864      00381         MOV     A,@0x64
001D 3880      00382         MOV     _PDC3,A
001E 1000      00383         JMP     _00315_DS_
001F           00384 _00307_DS_:
               00385 ;       .line   411; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     else if( 1 == led_switch )
001F 3000      00386         MOV     A,_led_switch
0020 0E01      00387         XOR     A,@0x01
0021 2503      00388         JBTS    STATUS,2
0022 1000      00389         JMP     _00315_DS_
               00390 ;       .line   413; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     key_process( );
0023 1800      00391         CALL    _key_process
0024 1000      00392         JMP     _00315_DS_
               00393 ;       .line   418; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
0025 3822      00394         RET     
               00395 ; exit point of _main
               00396 
               00397 ;***
               00398 ;  pBlock Stats: dbName = C
               00399 ;***
               00400 ;has an exit
               00401 ;; Starting pCode block
               00402 S_XC8P9521_PWM_2__output_process        code
0000           00403 _output_process:        ;Function start
               00404 ; 2 exit points
               00405 ;       .line   363; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     switch( mode_switch )
0000 3000      00406         MOV     A,_mode_switch
0001 2503      00407         JBTS    STATUS,2
0002 1000      00408         JMP     _00298_DS_
0003 1000      00409         JMP     _00287_DS_
0004           00410 _00298_DS_:
0004 3000      00411         MOV     A,_mode_switch
0005 0E01      00412         XOR     A,@0x01
0006 2503      00413         JBTS    STATUS,2
0007 1000      00414         JMP     _00299_DS_
0008 1000      00415         JMP     _00288_DS_
0009           00416 _00299_DS_:
0009 1000      00417         JMP     _00290_DS_
000A           00418 _00287_DS_:
               00419 ;       .line   367; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     NOP();
000A 3800      00420         nop     
               00421 ;       .line   368; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
000B 1000      00422         JMP     _00290_DS_
000C           00423 _00288_DS_:
               00424 ;       .line   372; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     NOP();
000C 3800      00425         nop     
               00426 ;       .line   375; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
000D           00427 _00290_DS_:
               00428 ;       .line   374; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
000D 3822      00429         RET     
               00430 ; exit point of _output_process
               00431 
               00432 ;***
               00433 ;  pBlock Stats: dbName = C
               00434 ;***
               00435 ;has an exit
               00436 ;1 compiler assigned register :
               00437 ;   r0x1012
               00438 ;; Starting pCode block
               00439 S_XC8P9521_PWM_2__rgb_process   code
0000           00440 _rgb_process:   ;Function start
               00441 ; 2 exit points
               00442 ;       .line   285; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( led_cnt == 20 )
0000 3000      00443         MOV     A,_led_cnt
0001 0E14      00444         XOR     A,@0x14
0002 2503      00445         JBTS    STATUS,2
0003 1000      00446         JMP     _00259_DS_
               00447 ;       .line   287; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_cnt = 0;
0004 3980      00448         CLR     _led_cnt
               00449 ;       .line   288; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     cir_mode = !cir_mode;
0005 3000      00450         MOV     A,_cir_mode
0006 0800      00451         MOV     A,@0x00
0007 2103      00452         JBTC    STATUS,2
0008 0801      00453         MOV     A,@0x01
0009 3880      00454         MOV     r0x1012,A
000A 3000      00455         MOV     A,r0x1012
000B 3880      00456         MOV     _cir_mode,A
000C           00457 _00259_DS_:
               00458 ;       .line   290; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     switch( led_switch )
000C 0801      00459         MOV     A,@0x01
000D 3A00      00460         SUB     A,_led_switch
000E 2403      00461         JBTS    STATUS,0
000F 1000      00462         JMP     _00282_DS_
               00463 ;;swapping arguments (AOP_TYPEs 1/3)
0010 0804      00464         MOV     A,@0x04
0011 3A00      00465         SUB     A,_led_switch
0012 2003      00466         JBTC    STATUS,0
0013 1000      00467         JMP     _00282_DS_
0014 3B00      00468         DECA    _led_switch
0015 3880      00469         MOV     r0x1012,A
0016 3000      00470         MOV     A,r0x1012
0017           00471         BANKSEL PCL
0017 3F82      00472         ADD     PCL,A
0018 1000      00473         JMP     _00260_DS_
0019 1000      00474         JMP     _00266_DS_
001A 1000      00475         JMP     _00276_DS_
001B           00476 _00260_DS_:
               00477 ;       .line   294; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( CIR_FADEIN == cir_mode )
001B 3000      00478         MOV     A,_cir_mode
001C 0E01      00479         XOR     A,@0x01
001D 2503      00480         JBTS    STATUS,2
001E 1000      00481         JMP     _00264_DS_
               00482 ;       .line   296; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     color_pwm_duty += 5;
001F 0805      00483         MOV     A,@0x05
0020 3F80      00484         ADD     _color_pwm_duty,A
0021 1000      00485         JMP     _00265_DS_
0022           00486 _00264_DS_:
               00487 ;       .line   298; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     else if( CIR_DIEOUT == cir_mode )
0022 0800      00488         MOV     A,@0x00
0023 3C00      00489         OR      A,_cir_mode
0024 2503      00490         JBTS    STATUS,2
0025 1000      00491         JMP     _00265_DS_
               00492 ;       .line   300; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     color_pwm_duty -= 5;
0026 08FB      00493         MOV     A,@0xfb
0027 3F80      00494         ADD     _color_pwm_duty,A
0028           00495 _00265_DS_:
               00496 ;       .line   302; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_cnt++;
0028 3280      00497         INC     _led_cnt
               00498 ;       .line   303; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = color_pwm_duty;
0029 3000      00499         MOV     A,_color_pwm_duty
002A 3880      00500         MOV     _PDC1,A
               00501 ;       .line   304; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     G_PWMDTY = color_pwm_duty;                      
002B 3000      00502         MOV     A,_color_pwm_duty
002C 3880      00503         MOV     _PDC2,A
               00504 ;       .line   305; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     B_PWMDTY = color_pwm_duty;
002D 3000      00505         MOV     A,_color_pwm_duty
002E 3880      00506         MOV     _PDC3,A
               00507 ;       .line   306; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
002F 1000      00508         JMP     _00282_DS_
0030           00509 _00266_DS_:
               00510 ;       .line   310; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( 1 == cir_mode )
0030 3000      00511         MOV     A,_cir_mode
0031 0E01      00512         XOR     A,@0x01
0032 2503      00513         JBTS    STATUS,2
0033 1000      00514         JMP     _00270_DS_
               00515 ;       .line   312; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     once_pwm_duty += 5;
0034 0805      00516         MOV     A,@0x05
0035 3F80      00517         ADD     _once_pwm_duty,A
0036 1000      00518         JMP     _00271_DS_
0037           00519 _00270_DS_:
               00520 ;       .line   314; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     else if( 0 == cir_mode )
0037 0800      00521         MOV     A,@0x00
0038 3C00      00522         OR      A,_cir_mode
0039 2503      00523         JBTS    STATUS,2
003A 1000      00524         JMP     _00271_DS_
               00525 ;       .line   316; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     once_pwm_duty -= 5;
003B 08FB      00526         MOV     A,@0xfb
003C 3F80      00527         ADD     _once_pwm_duty,A
003D           00528 _00271_DS_:
               00529 ;       .line   318; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_cnt++;
003D 3280      00530         INC     _led_cnt
               00531 ;;swapping arguments (AOP_TYPEs 1/3)
               00532 ;       .line   319; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     switch( led_mode )
003E 0803      00533         MOV     A,@0x03
003F 3A00      00534         SUB     A,_led_mode
0040 2003      00535         JBTC    STATUS,0
0041 1000      00536         JMP     _00282_DS_
0042 3000      00537         MOV     A,_led_mode
0043           00538         BANKSEL PCL
0043 3F82      00539         ADD     PCL,A
0044 1000      00540         JMP     _00272_DS_
0045 1000      00541         JMP     _00273_DS_
0046 1000      00542         JMP     _00274_DS_
0047           00543 _00272_DS_:
               00544 ;       .line   322; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = once_pwm_duty;
0047 3000      00545         MOV     A,_once_pwm_duty
0048 3880      00546         MOV     _PDC1,A
               00547 ;       .line   323; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     G_PWMDTY = 0;
0049 3980      00548         CLR     _PDC2
               00549 ;       .line   324; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     B_PWMDTY = 0;
004A 3980      00550         CLR     _PDC3
               00551 ;       .line   325; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
004B 1000      00552         JMP     _00282_DS_
004C           00553 _00273_DS_:
               00554 ;       .line   327; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = 0;
004C 3980      00555         CLR     _PDC1
               00556 ;       .line   328; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     G_PWMDTY = once_pwm_duty;
004D 3000      00557         MOV     A,_once_pwm_duty
004E 3880      00558         MOV     _PDC2,A
               00559 ;       .line   329; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     B_PWMDTY = 0;
004F 3980      00560         CLR     _PDC3
               00561 ;       .line   330; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
0050 1000      00562         JMP     _00282_DS_
0051           00563 _00274_DS_:
               00564 ;       .line   332; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = 0;
0051 3980      00565         CLR     _PDC1
               00566 ;       .line   333; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     G_PWMDTY = 0;
0052 3980      00567         CLR     _PDC2
               00568 ;       .line   334; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     B_PWMDTY = once_pwm_duty;
0053 3000      00569         MOV     A,_once_pwm_duty
0054 3880      00570         MOV     _PDC3,A
               00571 ;       .line   337; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
0055 1000      00572         JMP     _00282_DS_
0056           00573 _00276_DS_:
               00574 ;       .line   340; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = 0;
0056 3980      00575         CLR     _PDC1
               00576 ;       .line   341; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     G_PWMDTY = 0;                   
0057 3980      00577         CLR     _PDC2
               00578 ;       .line   342; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     B_PWMDTY = 0;
0058 3980      00579         CLR     _PDC3
               00580 ;       .line   343; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     once_pwm_duty = 100;
0059 0864      00581         MOV     A,@0x64
005A 3880      00582         MOV     _once_pwm_duty,A
               00583 ;;swapping arguments (AOP_TYPEs 1/3)
               00584 ;       .line   344; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     switch( led_mode )
005B 0803      00585         MOV     A,@0x03
005C 3A00      00586         SUB     A,_led_mode
005D 2003      00587         JBTC    STATUS,0
005E 1000      00588         JMP     _00282_DS_
005F 3000      00589         MOV     A,_led_mode
0060           00590         BANKSEL PCL
0060 3F82      00591         ADD     PCL,A
0061 1000      00592         JMP     _00277_DS_
0062 1000      00593         JMP     _00278_DS_
0063 1000      00594         JMP     _00279_DS_
0064           00595 _00277_DS_:
               00596 ;       .line   347; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     R_PWMDTY = once_pwm_duty;
0064 0864      00597         MOV     A,@0x64
0065 3880      00598         MOV     _PDC1,A
               00599 ;       .line   348; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
0066 1000      00600         JMP     _00282_DS_
0067           00601 _00278_DS_:
               00602 ;       .line   350; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     G_PWMDTY = once_pwm_duty;
0067 0864      00603         MOV     A,@0x64
0068 3880      00604         MOV     _PDC2,A
               00605 ;       .line   351; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
0069 1000      00606         JMP     _00282_DS_
006A           00607 _00279_DS_:
               00608 ;       .line   353; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     B_PWMDTY = once_pwm_duty;
006A 0864      00609         MOV     A,@0x64
006B 3880      00610         MOV     _PDC3,A
               00611 ;       .line   358; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
006C           00612 _00282_DS_:
               00613 ;       .line   357; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }       
006C 3822      00614         RET     
               00615 ; exit point of _rgb_process
               00616 
               00617 ;***
               00618 ;  pBlock Stats: dbName = C
               00619 ;***
               00620 ;has an exit
               00621 ;1 compiler assigned register :
               00622 ;   r0x100F
               00623 ;; Starting pCode block
               00624 S_XC8P9521_PWM_2__key_process   code
0000           00625 _key_process:   ;Function start
               00626 ; 2 exit points
               00627 ;       .line   205; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( 0 == PWRKY_PORT() )
0000 2100      00628         JBTC    _PORT5bits,2
0001 1000      00629         JMP     _00189_DS_
               00630 ;       .line   207; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     pwrkey_delay++;
0002 3280      00631         INC     _pwrkey_delay
0003 2103      00632         JBTC    STATUS,2
0004 3280      00633         INC     (_pwrkey_delay + 1)
0005 1000      00634         JMP     _00190_DS_
0006           00635 _00189_DS_:
               00636 ;       .line   212; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( pwrkey_delay >= 20 )
0006 0800      00637         MOV     A,@0x00
0007 3A00      00638         SUB     A,(_pwrkey_delay + 1)
0008 2503      00639         JBTS    STATUS,2
0009 1000      00640         JMP     _00243_DS_
000A 0814      00641         MOV     A,@0x14
000B 3A00      00642         SUB     A,_pwrkey_delay
000C           00643 _00243_DS_:
000C 2403      00644         JBTS    STATUS,0
000D 1000      00645         JMP     _00187_DS_
               00646 ;       .line   215; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( pwrkey_delay < 3000 )
000E 080B      00647         MOV     A,@0x0b
000F 3A00      00648         SUB     A,(_pwrkey_delay + 1)
0010 2503      00649         JBTS    STATUS,2
0011 1000      00650         JMP     _00244_DS_
0012 08B8      00651         MOV     A,@0xb8
0013 3A00      00652         SUB     A,_pwrkey_delay
0014           00653 _00244_DS_:
0014 2003      00654         JBTC    STATUS,0
0015 1000      00655         JMP     _00184_DS_
               00656 ;       .line   217; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     switch( mode_switch )
0016 3000      00657         MOV     A,_mode_switch
0017 2503      00658         JBTS    STATUS,2
0018 1000      00659         JMP     _00245_DS_
0019 1000      00660         JMP     _00178_DS_
001A           00661 _00245_DS_:
001A 3000      00662         MOV     A,_mode_switch
001B 0E01      00663         XOR     A,@0x01
001C 2503      00664         JBTS    STATUS,2
001D 1000      00665         JMP     _00246_DS_
001E 1000      00666         JMP     _00179_DS_
001F           00667 _00246_DS_:
001F 1000      00668         JMP     _00187_DS_
0020           00669 _00178_DS_:
               00670 ;       .line   220; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_mode = BEEP_ONE;
0020 0801      00671         MOV     A,@0x01
0021 3880      00672         MOV     _beep_mode,A
               00673 ;       .line   221; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_delay = 0;
0022 3980      00674         CLR     _beep_delay
0023 3980      00675         CLR     (_beep_delay + 1)
               00676 ;       .line   222; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_cnt = 1;
0024 0801      00677         MOV     A,@0x01
0025 3880      00678         MOV     _beep_cnt,A
               00679 ;       .line   223; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     mode_switch = TWO_GEARS;
0026 0801      00680         MOV     A,@0x01
0027 3880      00681         MOV     _mode_switch,A
               00682 ;       .line   224; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break; 
0028 1000      00683         JMP     _00187_DS_
0029           00684 _00179_DS_:
               00685 ;       .line   227; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_mode = BEEP_TWO; 
0029 0802      00686         MOV     A,@0x02
002A 3880      00687         MOV     _beep_mode,A
               00688 ;       .line   228; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_delay = 0;
002B 3980      00689         CLR     _beep_delay
002C 3980      00690         CLR     (_beep_delay + 1)
               00691 ;       .line   229; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_cnt = 2;
002D 0802      00692         MOV     A,@0x02
002E 3880      00693         MOV     _beep_cnt,A
               00694 ;       .line   230; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     mode_switch = ONE_GEARS;
002F 3980      00695         CLR     _mode_switch
               00696 ;       .line   232; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
0030 1000      00697         JMP     _00187_DS_
0031           00698 _00184_DS_:
               00699 ;       .line   235; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     else if( pwrkey_delay >= 3000 )
0031 080B      00700         MOV     A,@0x0b
0032 3A00      00701         SUB     A,(_pwrkey_delay + 1)
0033 2503      00702         JBTS    STATUS,2
0034 1000      00703         JMP     _00247_DS_
0035 08B8      00704         MOV     A,@0xb8
0036 3A00      00705         SUB     A,_pwrkey_delay
0037           00706 _00247_DS_:
0037 2403      00707         JBTS    STATUS,0
0038 1000      00708         JMP     _00187_DS_
               00709 ;       .line   238; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     NOP( );
0039 3800      00710         nop     
003A           00711 _00187_DS_:
               00712 ;       .line   241; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     pwrkey_delay = 0;
003A 3980      00713         CLR     _pwrkey_delay
003B 3980      00714         CLR     (_pwrkey_delay + 1)
003C           00715 _00190_DS_:
               00716 ;       .line   245; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( 0 == LEDKEY_PORT( ) )
003C 2080      00717         JBTC    _PORT5bits,1
003D 1000      00718         JMP     _00203_DS_
               00719 ;       .line   247; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     ledkey_delay++;
003E 3280      00720         INC     _ledkey_delay
003F 2103      00721         JBTC    STATUS,2
0040 3280      00722         INC     (_ledkey_delay + 1)
0041 1000      00723         JMP     _00205_DS_
0042           00724 _00203_DS_:
               00725 ;       .line   252; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( ledkey_delay >= 20 )
0042 0800      00726         MOV     A,@0x00
0043 3A00      00727         SUB     A,(_ledkey_delay + 1)
0044 2503      00728         JBTS    STATUS,2
0045 1000      00729         JMP     _00248_DS_
0046 0814      00730         MOV     A,@0x14
0047 3A00      00731         SUB     A,_ledkey_delay
0048           00732 _00248_DS_:
0048 2403      00733         JBTS    STATUS,0
0049 1000      00734         JMP     _00201_DS_
               00735 ;       .line   255; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( ledkey_delay < 3000 )
004A 080B      00736         MOV     A,@0x0b
004B 3A00      00737         SUB     A,(_ledkey_delay + 1)
004C 2503      00738         JBTS    STATUS,2
004D 1000      00739         JMP     _00249_DS_
004E 08B8      00740         MOV     A,@0xb8
004F 3A00      00741         SUB     A,_ledkey_delay
0050           00742 _00249_DS_:
0050 2003      00743         JBTC    STATUS,0
0051 1000      00744         JMP     _00198_DS_
               00745 ;       .line   257; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_switch = 1;
0052 0801      00746         MOV     A,@0x01
0053 3880      00747         MOV     _led_switch,A
               00748 ;       .line   258; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     switch( led_mode )
0054 0801      00749         MOV     A,@0x01
0055 3A00      00750         SUB     A,_led_mode
0056 2403      00751         JBTS    STATUS,0
0057 1000      00752         JMP     _00201_DS_
               00753 ;;swapping arguments (AOP_TYPEs 1/3)
0058 0804      00754         MOV     A,@0x04
0059 3A00      00755         SUB     A,_led_mode
005A 2003      00756         JBTC    STATUS,0
005B 1000      00757         JMP     _00201_DS_
005C 3B00      00758         DECA    _led_mode
005D 3880      00759         MOV     r0x100F,A
005E 3000      00760         MOV     A,r0x100F
005F           00761         BANKSEL PCL
005F 3F82      00762         ADD     PCL,A
0060 1000      00763         JMP     _00191_DS_
0061 1000      00764         JMP     _00192_DS_
0062 1000      00765         JMP     _00193_DS_
0063           00766 _00191_DS_:
               00767 ;       .line   261; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_mode = RGB_ONE_CIR;
0063 0802      00768         MOV     A,@0x02
0064 3880      00769         MOV     _led_mode,A
               00770 ;       .line   262; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
0065 1000      00771         JMP     _00201_DS_
0066           00772 _00192_DS_:
               00773 ;       .line   264; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_mode = RGB_ONE_ONCE;
0066 0803      00774         MOV     A,@0x03
0067 3880      00775         MOV     _led_mode,A
               00776 ;       .line   265; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;
0068 1000      00777         JMP     _00201_DS_
0069           00778 _00193_DS_:
               00779 ;       .line   267; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_mode = RGB_COLOR_CIR;
0069 0801      00780         MOV     A,@0x01
006A 3880      00781         MOV     _led_mode,A
               00782 ;       .line   269; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
006B 1000      00783         JMP     _00201_DS_
006C           00784 _00198_DS_:
               00785 ;       .line   272; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     else if( ledkey_delay >= 3000 )
006C 080B      00786         MOV     A,@0x0b
006D 3A00      00787         SUB     A,(_ledkey_delay + 1)
006E 2503      00788         JBTS    STATUS,2
006F 1000      00789         JMP     _00253_DS_
0070 08B8      00790         MOV     A,@0xb8
0071 3A00      00791         SUB     A,_ledkey_delay
0072           00792 _00253_DS_:
0072 2403      00793         JBTS    STATUS,0
0073 1000      00794         JMP     _00201_DS_
               00795 ;       .line   274; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_mode = RGB_ONE_NONE;
0074 3980      00796         CLR     _led_mode
0075           00797 _00201_DS_:
               00798 ;       .line   277; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     ledkey_delay = 0;
0075 3980      00799         CLR     _ledkey_delay
0076 3980      00800         CLR     (_ledkey_delay + 1)
               00801 ;       .line   279; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
0077           00802 _00205_DS_:
0077 3822      00803         RET     
               00804 ; exit point of _key_process
               00805 
               00806 ;***
               00807 ;  pBlock Stats: dbName = C
               00808 ;***
               00809 ;has an exit
               00810 ;2 compiler assigned registers:
               00811 ;   r0x1013
               00812 ;   r0x1014
               00813 ;; Starting pCode block
               00814 S_XC8P9521_PWM_2__shake_process code
0000           00815 _shake_process: ;Function start
               00816 ; 2 exit points
               00817 ;       .line   196; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( 1 ==  SHAKE_PORT( ) )
0000 3980      00818         CLR     r0x1013
0001 2000      00819         JBTC    _PORT5bits,0
0002 3280      00820         INC     r0x1013
               00821 ;;101   MOV     A,r0x1013
               00822 ;;99    MOV     r0x1014,A
               00823 ;;100   MOV     A,r0x1014
0003 3000      00824         MOV     A,r0x1013
0004 0E01      00825         XOR     A,@0x01
0005 2503      00826         JBTS    STATUS,2
0006 1000      00827         JMP     _00173_DS_
               00828 ;       .line   198; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     led_switch = !led_switch;
0007 3000      00829         MOV     A,_led_switch
0008 0800      00830         MOV     A,@0x00
0009 2103      00831         JBTC    STATUS,2
000A 0801      00832         MOV     A,@0x01
000B 3880      00833         MOV     r0x1013,A
000C 3000      00834         MOV     A,r0x1013
000D 3880      00835         MOV     _led_switch,A
               00836 ;       .line   200; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
000E           00837 _00173_DS_:
000E 3822      00838         RET     
               00839 ; exit point of _shake_process
               00840 
               00841 ;***
               00842 ;  pBlock Stats: dbName = C
               00843 ;***
               00844 ;has an exit
               00845 ;2 compiler assigned registers:
               00846 ;   r0x1015
               00847 ;   r0x1016
               00848 ;; Starting pCode block
               00849 S_XC8P9521_PWM_2__beep_process  code
0000           00850 _beep_process:  ;Function start
               00851 ; 2 exit points
               00852 ;;swapping arguments (AOP_TYPEs 1/3)
               00853 ;       .line   158; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     switch( beep_mode )
0000 0803      00854         MOV     A,@0x03
0001 3A00      00855         SUB     A,_beep_mode
0002 2003      00856         JBTC    STATUS,0
0003 1000      00857         JMP     _00143_DS_
0004 3000      00858         MOV     A,_beep_mode
0005           00859         BANKSEL PCL
0005 3F82      00860         ADD     PCL,A
0006 1000      00861         JMP     _00128_DS_
0007 1000      00862         JMP     _00129_DS_
0008 1000      00863         JMP     _00134_DS_
0009           00864 _00128_DS_:
               00865 ;       .line   161; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     BEEP_PORT( ) = 0;
0009 2A80      00866         BTC     _PORT6bits,5
               00867 ;       .line   162; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;  
000A 1000      00868         JMP     _00143_DS_
000B           00869 _00129_DS_:
               00870 ;       .line   164; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     BEEP_PORT( ) = 1;
000B 2E80      00871         BTS     _PORT6bits,5
               00872 ;       .line   165; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_cnt--;
000C 3B80      00873         DEC     _beep_cnt
               00874 ;       .line   166; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( beep_delay++ >= 2000 )
000D 3000      00875         MOV     A,_beep_delay
000E 3880      00876         MOV     r0x1015,A
000F 3000      00877         MOV     A,(_beep_delay + 1)
0010 3880      00878         MOV     r0x1016,A
0011 3280      00879         INC     _beep_delay
0012 2103      00880         JBTC    STATUS,2
0013 3280      00881         INC     (_beep_delay + 1)
0014 0807      00882         MOV     A,@0x07
0015 3A00      00883         SUB     A,r0x1016
0016 2503      00884         JBTS    STATUS,2
0017 1000      00885         JMP     _00165_DS_
0018 08D0      00886         MOV     A,@0xd0
0019 3A00      00887         SUB     A,r0x1015
001A           00888 _00165_DS_:
001A 2403      00889         JBTS    STATUS,0
001B 1000      00890         JMP     _00143_DS_
               00891 ;       .line   168; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( beep_cnt == 0 )
001C 0800      00892         MOV     A,@0x00
001D 3C00      00893         OR      A,_beep_cnt
001E 2503      00894         JBTS    STATUS,2
001F 1000      00895         JMP     _00143_DS_
               00896 ;       .line   170; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_mode = BEEP_NONE;
0020 3980      00897         CLR     _beep_mode
               00898 ;       .line   171; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_delay = 0;
0021 3980      00899         CLR     _beep_delay
0022 3980      00900         CLR     (_beep_delay + 1)
               00901 ;       .line   174; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     break;  
0023 1000      00902         JMP     _00143_DS_
0024           00903 _00134_DS_:
               00904 ;       .line   176; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     BEEP_PORT( ) = 1;
0024 2E80      00905         BTS     _PORT6bits,5
               00906 ;       .line   177; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( beep_delay++ >= 20)
0025 3000      00907         MOV     A,_beep_delay
0026 3880      00908         MOV     r0x1015,A
0027 3000      00909         MOV     A,(_beep_delay + 1)
0028 3880      00910         MOV     r0x1016,A
0029 3280      00911         INC     _beep_delay
002A 2103      00912         JBTC    STATUS,2
002B 3280      00913         INC     (_beep_delay + 1)
002C 0800      00914         MOV     A,@0x00
002D 3A00      00915         SUB     A,r0x1016
002E 2503      00916         JBTS    STATUS,2
002F 1000      00917         JMP     _00166_DS_
0030 0814      00918         MOV     A,@0x14
0031 3A00      00919         SUB     A,r0x1015
0032           00920 _00166_DS_:
0032 2403      00921         JBTS    STATUS,0
0033 1000      00922         JMP     _00143_DS_
               00923 ;       .line   179; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_cnt--;
0034 3B80      00924         DEC     _beep_cnt
               00925 ;       .line   180; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     if( beep_cnt == 0 )
0035 0800      00926         MOV     A,@0x00
0036 3C00      00927         OR      A,_beep_cnt
0037 2503      00928         JBTS    STATUS,2
0038 1000      00929         JMP     _00138_DS_
               00930 ;       .line   182; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_delay = 0;
0039 3980      00931         CLR     _beep_delay
003A 3980      00932         CLR     (_beep_delay + 1)
               00933 ;       .line   183; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_mode = BEEP_NONE;
003B 3980      00934         CLR     _beep_mode
003C 1000      00935         JMP     _00143_DS_
003D           00936 _00138_DS_:
               00937 ;       .line   185; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     else if( beep_cnt == 1 )
003D 3000      00938         MOV     A,_beep_cnt
003E 0E01      00939         XOR     A,@0x01
003F 2503      00940         JBTS    STATUS,2
0040 1000      00941         JMP     _00143_DS_
               00942 ;       .line   187; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     beep_delay = 0;
0041 3980      00943         CLR     _beep_delay
0042 3980      00944         CLR     (_beep_delay + 1)
               00945 ;       .line   188; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     BEEP_PORT( ) = 0;
0043 2A80      00946         BTC     _PORT6bits,5
               00947 ;       .line   193; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
0044           00948 _00143_DS_:
               00949 ;       .line   192; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
0044 3822      00950         RET     
               00951 ; exit point of _beep_process
               00952 
               00953 ;***
               00954 ;  pBlock Stats: dbName = C
               00955 ;***
               00956 ;has an exit
               00957 ;; Starting pCode block
               00958 S_XC8P9521_PWM_2__file_project_init     code
0000           00959 _file_project_init:     ;Function start
               00960 ; 2 exit points
               00961 ;       .line   129; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     IOCP_W(IMR,0x09);               //TCC+PWM周期中断,根据需要调用  
0000 0809      00962         mov     a,@0x09
0001 380F      00963         iw      IMR
               00964 ;       .line   130; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     PWMCON = 0xf8;                  //使能3路pwm输出，pwm=1/8*2(分频)*4clock*100=100us
0002 08F8      00965         MOV     A,@0xf8
0003 3880      00966         MOV     _PWMCON,A
               00967 ;       .line   131; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     PRD = 100;                              //PWM周期寄存器
0004 0864      00968         MOV     A,@0x64
0005 3880      00969         MOV     _PRD,A
               00970 ;       .line   132; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
0006 3822      00971         RET     
               00972 ; exit point of _file_project_init
               00973 
               00974 ;***
               00975 ;  pBlock Stats: dbName = C
               00976 ;***
               00977 ;has an exit
               00978 ;; Starting pCode block
               00979 S_XC8P9521_PWM_2__file_init     code
0000           00980 _file_init:     ;Function start
               00981 ; 2 exit points
               00982 ;       .line   108; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     CONTW(0x02);                    //TCC 8分频
0000 0802      00983         mov     a,@0x02
0001 3802      00984         ctw
               00985 ;       .line   109; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     TCC = 6;                                //1/2 * 8 * (256-6) = 1000us    公式：1/IRC频率 * 预分频 * （256-初值）
0002 0806      00986         MOV     A,@0x06
0003 3880      00987         MOV     _TCC,A
               00988 ;       .line   110; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     PORT5 = 0;                              //
0004 3980      00989         CLR     _PORT5
               00990 ;       .line   111; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     PORT6 = 0;                              //
0005 3980      00991         CLR     _PORT6
               00992 ;       .line   112; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     IOCP_W(P5CR,0x0F);              // 50 51 52 53 均为输入
0006 080F      00993         mov     a,@0x0F
0007 3805      00994         iw      P5CR
               00995 ;       .line   113; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     IOCP_W(P6CR,0x00);              // 65 66 67 输出
0008 0800      00996         mov     a,@0x00
0009 3806      00997         iw      P6CR
               00998 ;       .line   114; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     IOCP_W(PHDCR,0xff);             //端口上下拉控制寄存器，bit7-bit4对应P67-P64下拉;bit3-bit0对应P53-P50上拉 
000A 08FF      00999         mov     a,@0xff
000B 3809      01000         iw      PHDCR
               01001 ;       .line   115; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     IOCP_W(PDCR,0xff);              //端口下拉控制寄存器，  bit6-bit4对应P62-P60,bit3-bit0对应P53-P50
000C 08FF      01002         mov     a,@0xff
000D 380B      01003         iw      PDCR
               01004 ;       .line   116; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     IOCP_W(PHCR,0xff);              //P6端口上拉控制寄存器  bit7-bit0对应P67-P60
000E 08FF      01005         mov     a,@0xff
000F 380D      01006         iw      PHCR
               01007 ;       .line   117; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     IOCP_W(WDTCR,0x00);             //WDT 使能控制寄存器    IOCP_W(IMR,0x01);               //中断使能控制寄存器 
0010 0800      01008         mov     a,@0x00
0011 380E      01009         iw      WDTCR
               01010 ;       .line   118; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     ISR = 0x0;                              //清TC0中断标志位 
0012 3980      01011         CLR     _ISR
               01012 ;       .line   119; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
0013 3822      01013         RET     
               01014 ; exit point of _file_init
               01015 
               01016 ;***
               01017 ;  pBlock Stats: dbName = C
               01018 ;***
               01019 ;has an exit
               01020 ;; Starting pCode block
               01021 S_XC8P9521_PWM_2__file_clrRam   code
0000           01022 _file_clrRam:   ;Function start
               01023 ; 2 exit points
               01024 ;       .line   98; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C      for(RSR=0xD0;RSR<0xFF;RSR++)    //清零 BANK0 RAM  IAR-R0,RSR-R4
0000 08D0      01025         MOV     A,@0xd0
0001 3880      01026         MOV     _RSR,A
0002           01027 _00107_DS_:
0002 08FF      01028         MOV     A,@0xff
0003 3A00      01029         SUB     A,_RSR
0004 2003      01030         JBTC    STATUS,0
0005 1000      01031         JMP     _00105_DS_
               01032 ;       .line   100; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     {IAR = 0;}
0006 3980      01033         CLR     _IAR
               01034 ;       .line   98; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C      for(RSR=0xD0;RSR<0xFF;RSR++)    //清零 BANK0 RAM  IAR-R0,RSR-R4
0007 3280      01035         INC     _RSR
0008 1000      01036         JMP     _00107_DS_
0009           01037 _00105_DS_:
               01038 ;       .line   101; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     IAR = 0;
0009 3980      01039         CLR     _IAR
               01040 ;       .line   102; C:\USERS\15247\DESKTOP\XJ\FUN\XC8P9521-PWM-2.C     }
000A 3822      01041         RET     
               01042 ; exit point of _file_clrRam
               01043 
               01044 
               01045 ;       code size estimation:
               01046 ;         394+    5 =   399 instructions (  808 byte)
               01047 


SYMBOL TABLE
  LABEL                             VALUE 

CONT                              00000002
CPUCON                            0000000E
END_OF_INTERRUPT                  00000019
IAR                               00000000
ICIECR                            0000000D
IMR                               0000000F
ISR                               0000000F
LVDCON                            00000007
P5CR                              00000005
P6CR                              00000006
PCL                               00000002
PDC1                              0000000A
PDC2                              0000000B
PDC3                              0000000C
PDCR                              0000000B
PHCR                              0000000D
PHDCR                             00000009
PORT5                             00000005
PORT6                             00000006
PRD                               00000009
PWMCON                            00000008
RSR                               00000004
STATUS                            00000003
STK00                             00000026
STK01                             00000025
STK02                             00000024
STK03                             00000023
STK04                             00000022
STK05                             00000021
STK06                             00000020
TCC                               00000001
WDTCR                             0000000E
_00105_DS_                        00000009
_00107_DS_                        00000002
_00121_DS_                        00000012
_00123_DS_                        00000016
_00128_DS_                        00000009
_00129_DS_                        0000000B
_00134_DS_                        00000024
_00138_DS_                        0000003D
_00143_DS_                        00000044
_00165_DS_                        0000001A
_00166_DS_                        00000032
_00173_DS_                        0000000E
_00178_DS_                        00000020
_00179_DS_                        00000029
_00184_DS_                        00000031
_00187_DS_                        0000003A
_00189_DS_                        00000006
_00190_DS_                        0000003C
_00191_DS_                        00000063
_00192_DS_                        00000066
_00193_DS_                        00000069
_00198_DS_                        0000006C
_00201_DS_                        00000075
_00203_DS_                        00000042
_00205_DS_                        00000077
_00243_DS_                        0000000C
_00244_DS_                        00000014
_00245_DS_                        0000001A
_00246_DS_                        0000001F
_00247_DS_                        00000037
_00248_DS_                        00000048
_00249_DS_                        00000050
_00253_DS_                        00000072
_00259_DS_                        0000000C
_00260_DS_                        0000001B
_00264_DS_                        00000022
_00265_DS_                        00000028
_00266_DS_                        00000030
_00270_DS_                        00000037
_00271_DS_                        0000003D
_00272_DS_                        00000047
_00273_DS_                        0000004C
_00274_DS_                        00000051
_00276_DS_                        00000056
_00277_DS_                        00000064
_00278_DS_                        00000067
_00279_DS_                        0000006A
_00282_DS_                        0000006C
_00287_DS_                        0000000A
_00288_DS_                        0000000C
_00290_DS_                        0000000D
_00298_DS_                        00000004
_00299_DS_                        00000009
_00307_DS_                        0000001F
_00312_DS_                        00000014
_00315_DS_                        00000004
_A_BUFF                           00000010
_CPUCON                           00000000
_CPUCONbits                       00000000
_IAR                              00000000
_IARbits                          00000000
_ICIECR                           00000000
_ICIECRbits                       00000000
_ISR                              00000000
_ISRbits                          00000000
_LVDCON                           00000000
_LVDCONbits                       00000000
_PCL                              00000000
_PCLbits                          00000000
_PDC1                             00000000
_PDC1bits                         00000000
_PDC2                             00000000
_PDC2bits                         00000000
_PDC3                             00000000
_PDC3bits                         00000000
_PORT5                            00000000
_PORT5bits                        00000000
_PORT6                            00000000
_PORT6bits                        00000000
_PRD                              00000000
_PRDbits                          00000000
_PWMCON                           00000000
_PWMCONbits                       00000000
_R3_BUFF                          00000011
_RSR                              00000000
_RSRbits                          00000000
_STATUS                           00000000
_STATUSbits                       00000000
_TCC                              00000000
_TCCbits                          00000000
__sdcc_interrupt                  00000003
__xc8p9521                        00000001
_beep_cnt                         00000000
_beep_delay                       00000000
_beep_mode                        00000000
_beep_process                     00000000
_cir_mode                         00000000
_color_pwm_duty                   00000000
_delayMs                          00000000
_delayUs                          00000000
_file_clrRam                      00000000
_file_init                        00000000
_file_project_init                00000000
_int_isr                          00000003
_key_process                      00000000
_led_cnt                          00000000
_led_mode                         00000000
_led_switch                       00000000
_ledkey_delay                     00000000
_main                             00000000
_mode_switch                      00000000
_once_pwm_duty                    00000000
_output_process                   00000000
_pwrkey_delay                     00000000
_rgb_process                      00000000
_shake_flag                       00000000
_shake_process                    00000000
r0x100F                           00000003
r0x1010                           00000005
r0x1012                           00000004
r0x1013                           00000002
r0x1015                           00000000
r0x1016                           00000001


Errors   :       0
Warnings :       0 reported,       0 suppressed
Messages :       0 reported,       0 suppressed

